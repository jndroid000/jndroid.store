{% extends "base.html" %}
{% load static %}
{% block title %}{{ category.name }} - Categories - jndroid store{% endblock %}
{% block extra_css %}<link rel="stylesheet" href="{% static 'css/app_list.css' %}">{% endblock %}

{% block content %}
<div class="pageHeader" style="--category-color: {{ category.color }}; background: linear-gradient(135deg, color-mix(in srgb, var(--category-color) 12%, transparent), color-mix(in srgb, var(--category-color) 5%, transparent)); border-left: 5px solid var(--category-color);">
  <h1 style="font-size: 2.5em;">{{ category.icon }} {{ category.name }}</h1>
  {% if category.description %}
    <p style="margin-top: 10px; color: #555;">{{ category.description }}</p>
  {% endif %}
  <p style="margin-top: 15px;">
    <a href="{% url 'categories:list' %}" style="color:var(--brand);">‚Üê ‡¶∏‡¶¨ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</a>
  </p>
</div>

{% if apps %}
  <div class="sectionTitle">
    <div>
      <h2>üì• ‡¶è‡¶á ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø‡¶§‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶∏</h2>
      <p>‡¶Æ‡ßã‡¶ü <strong>{{ total_apps }}</strong>‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™</p>
    </div>
  </div>
  
  <div class="appGrid">
    {% for a in apps %}
      <article class="app">
        <div class="appIcon" style="--category-color: {{ category.color }}; background-color: color-mix(in srgb, var(--category-color) 12%, transparent); border-left: 3px solid var(--category-color);">
          {% if a.cover_image %}
            <img src="{{ a.cover_image.url }}" alt="{{ a.title }}" style="width: 100%; height: 100%; object-fit: cover;">
          {% else %}
            {{ a.title|first|upper }}
          {% endif %}
        </div>
        <div class="appMeta">
          <b><a href="{% url 'apps:detail' a.slug %}">{{ a.title }}</a></b>
          <small>v{{ a.version|default:"-" }} ‚Ä¢ ü§ñ {{ a.target_android_version }}</small>
          <div class="row">
            <span class="tag">‚≠ê {{ a.avg_rating|default_if_none:"0"|floatformat:1 }} <span style="color:#999;">({{ a.total_ratings }})</span></span>
            <span class="tag">üì• {{ a.downloads|default:"0" }}</span>
          </div>
          <div class="dl">
            <span>{{ a.size_mb|default:"?" }}MB</span>
            <div style="flex:1;"></div>
            {% if a.is_free %}
              <span class="badge" style="background-color: #27ae60; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.9em;">‡¶¨‡¶ø‡¶®‡¶æ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡ßá</span>
            {% else %}
              <span class="badge" style="background-color: #e74c3c; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.9em;">${{ a.price|floatformat:2 }}</span>
            {% endif %}
            <a class="btn primary" href="{% url 'apps:download' a.slug %}" style="padding:8px 12px; font-size:12px;">‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°</a>
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
{% else %}
  <div class="noReviews">
    <p>{{ category.name }} ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø‡¶§‡ßá ‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶®‡ßá‡¶á‡•§ ü§∑</p>
  </div>
{% endif %}

<style>
  .app {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .app:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.12);
  }
</style>
{% endblock %}
